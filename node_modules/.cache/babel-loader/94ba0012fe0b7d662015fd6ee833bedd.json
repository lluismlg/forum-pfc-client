{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\lluis\\\\OneDrive\\\\Projects\\\\forum-pfc\\\\forum-pfc-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\lluis\\\\OneDrive\\\\Projects\\\\forum-pfc\\\\forum-pfc-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\lluis\\\\OneDrive\\\\Projects\\\\forum-pfc\\\\forum-pfc-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\lluis\\\\OneDrive\\\\Projects\\\\forum-pfc\\\\forum-pfc-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Card from'react-bootstrap/Card';import Downvote from'../images/downvote.png';import Upvote from'../images/upvote.png';var Post=/*#__PURE__*/function(_Component){_inherits(Post,_Component);var _super=_createSuper(Post);function Post(props){var _this;_classCallCheck(this,Post);_this=_super.call(this,props);_this.votePost=function(postId,postLikes,vote){if(_this.voted===\"\"){if(vote===\"upvote\"){console.log(\"upvoted\");_this.voted=\"upvoted\";document.getElementById(\"Upvote\").style.filter=\"contrast(100%)\";document.getElementById(\"Likes\").innerHTML=postLikes+1;// LLAMAR A NODE PARA VOTAR (+1)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=1\");}else{console.log(\"downvoted\");_this.voted=\"downvoted\";document.getElementById(\"Downvote\").style.filter=\"contrast(100%)\";document.getElementById(\"Likes\").innerHTML=postLikes-1;// LLAMAR A NODE PARA VOTAR (-1)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=-1\");}}else{// UPVOTE\nif(_this.voted===\"upvoted\"){if(vote===\"upvote\"){console.log(\"You removed the upvoted\");document.getElementById(\"Upvote\").style.filter=\"contrast(0%)\";document.getElementById(\"Likes\").innerHTML=postLikes;_this.voted=\"\";// LLAMAR A NODE PARA VOTAR (-1)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=-1\");}else{console.log(\"You upvoted but now downvote\");_this.voted=\"downvoted\";document.getElementById(\"Upvote\").style.filter=\"contrast(0%)\";document.getElementById(\"Downvote\").style.filter=\"contrast(100%)\";document.getElementById(\"Likes\").innerHTML=postLikes-1;// LLAMAR A NODE PARA CAMBIAR EL VOTO (-2)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=-2\");}}// DOWNVOTE\nelse{if(vote===\"downvote\"){console.log(\"You removed the downvoted\");document.getElementById(\"Downvote\").style.filter=\"contrast(0%)\";document.getElementById(\"Likes\").innerHTML=postLikes;_this.voted=\"\";// LLAMAR A NODE PARA VOTAR (+1)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=1\");}else{console.log(\"You downvoted but now upvoted\");_this.voted=\"upvoted\";document.getElementById(\"Upvote\").style.filter=\"contrast(100%)\";document.getElementById(\"Downvote\").style.filter=\"contrast(0%)\";document.getElementById(\"Likes\").innerHTML=postLikes+1;// LLAMAR A NODE PARA CAMBIAR EL VOTO (+2)\nfetch(_this.url+\"/api/vote?postId=\"+postId+\"&vote=2\");}}}};_this.uploadComment=function(){var content;var date=\"\";/* GET DATE */var today=new Date();var yyyy=today.getFullYear();var mm=String(today.getMonth()+1).padStart(2,'0');var dd=String(today.getDate()).padStart(2,'0');date=yyyy+'-'+mm+'-'+dd;/* TEMPORARY UNTIL I GET LOG IN */var author=\"unknown\";/* GET DATA */content=document.getElementById(\"CommentContent\").value;/* CHECK DATA */console.log(_this.state.PostId);console.log(date);console.log(\"author \"+author);console.log(\"content \"+content);/* UPLOAD COMMENT */fetch(_this.url+\"/api/uploadComment?postId=\"+_this.state.PostId+\"&commentDate=\"+date+\"&commentAuthor=\"+author+\"&commentContent=\"+content);/* RELOAD TO SHOW COMMENT */window.location.reload();};_this.state={PostId:null,Post:[],Comments:[]};_this.voted=\"\";_this.url=\"https://forum-pfc-node.herokuapp.com\";return _this;}_createClass(Post,[{key:\"componentDidMount\",value:function componentDidMount(){var url=new URL(window.location.href);var postId=url.searchParams.get(\"postId\");this.setState({PostId:postId});var that=this;fetch(this.url+\"/api/post?postId=\"+postId).then(function(response){return response.json();}).then(function(data){that.setState({Post:data});});fetch(this.url+\"/api/comments?postId=\"+postId).then(function(response){return response.json();}).then(function(data){that.setState({Comments:data});});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"post\"},this.state.Post.map(function(post,i){return/*#__PURE__*/React.createElement(Card,{className:\"postCard\",key:i},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,post.postTitle,/*#__PURE__*/React.createElement(\"p\",{className:\"author\"},post.postAuthor)),/*#__PURE__*/React.createElement(Card.Text,null,post.postContent),/*#__PURE__*/React.createElement(\"div\",{className:\"votes\"},/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:_this2.votePost.bind(_this2,post.postId,post.postLikes,\"upvote\")},/*#__PURE__*/React.createElement(\"img\",{src:Upvote,alt:\"Upvote\",id:\"Upvote\"})),/*#__PURE__*/React.createElement(\"p\",{id:\"Likes\"},post.postLikes),/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:_this2.votePost.bind(_this2,post.postId,post.postLikes,\"downvote\")},/*#__PURE__*/React.createElement(\"img\",{src:Downvote,alt:\"Downvote\",id:\"Downvote\"})))),/*#__PURE__*/React.createElement(Card.Img,{variant:\"top\",src:post.postImg,className:\"postCardImg\"}),/*#__PURE__*/React.createElement(Card.Footer,null,/*#__PURE__*/React.createElement(\"p\",{className:\"footerTopic\"},post.postTopic),/*#__PURE__*/React.createElement(\"p\",{className:\"footerDate\"},post.postDate)));}),/*#__PURE__*/React.createElement(\"div\",{className:\"comments\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Comments\"),/*#__PURE__*/React.createElement(\"div\",{className:\"commentCreator\"},/*#__PURE__*/React.createElement(Card,{className:\"commentInputCard\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h5\",null,\"Write your comment\")),/*#__PURE__*/React.createElement(\"div\",{className:\"commentInput\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"CommentContent\",className:\"commentContent\",placeholder:\"Comment\",maxLength:\"250\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"button\",className:\"commentUploadButton\",value:\"UPLOAD\",onClick:this.uploadComment}))))),this.state.Comments.map(function(comment,i){return/*#__PURE__*/React.createElement(Card,{className:\"commentCard\",key:i},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"p\",{className:\"commentAuthor\"},comment.commentAuthor),/*#__PURE__*/React.createElement(\"p\",{className:\"commentDate\"},comment.commentDate)),/*#__PURE__*/React.createElement(Card.Text,null,comment.commentContent)));})));}}]);return Post;}(Component);export default Post;","map":{"version":3,"sources":["C:/Users/lluis/OneDrive/Projects/forum-pfc/forum-pfc-client/src/components/Post.js"],"names":["React","Component","Card","Downvote","Upvote","Post","props","votePost","postId","postLikes","vote","voted","console","log","document","getElementById","style","filter","innerHTML","fetch","url","uploadComment","content","date","today","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","author","value","state","PostId","window","location","reload","Comments","URL","href","searchParams","get","setState","that","then","response","json","data","map","post","i","postTitle","postAuthor","postContent","bind","postImg","postTopic","postDate","comment","commentAuthor","commentDate","commentContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport Card from 'react-bootstrap/Card'\r\n\r\nimport Downvote from '../images/downvote.png'\r\nimport Upvote from '../images/upvote.png'\r\n\r\nclass Post extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tPostId: null,\r\n\t\t\tPost: [],\r\n\t\t\tComments: []\r\n\t\t}\r\n\r\n\t\tthis.voted = \"\";\r\n\r\n\t\tthis.url = \"https://forum-pfc-node.herokuapp.com\"\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tvar url = new URL(window.location.href);\r\n\t\tvar postId = url.searchParams.get(\"postId\");\r\n\t\tthis.setState({\r\n\t\t\tPostId: postId\r\n\t\t})\r\n\r\n\t\tconst that = this;\r\n\r\n\t\tfetch(this.url + \"/api/post?postId=\" + postId)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tthat.setState({\r\n\t\t\t\t\tPost: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\tfetch(this.url + \"/api/comments?postId=\" + postId)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tthat.setState({\r\n\t\t\t\t\tComments: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\r\n\tvotePost = (postId, postLikes, vote) => {\r\n\t\tif (this.voted === \"\") {\r\n\t\t\tif (vote === \"upvote\") {\r\n\t\t\t\tconsole.log(\"upvoted\");\r\n\t\t\t\tthis.voted = \"upvoted\";\r\n\t\t\t\tdocument.getElementById(\"Upvote\").style.filter = \"contrast(100%)\";\r\n\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes + 1;\r\n\r\n\t\t\t\t// LLAMAR A NODE PARA VOTAR (+1)\r\n\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=1\")\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"downvoted\");\r\n\t\t\t\tthis.voted = \"downvoted\"\r\n\t\t\t\tdocument.getElementById(\"Downvote\").style.filter = \"contrast(100%)\";\r\n\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes - 1;\r\n\r\n\t\t\t\t// LLAMAR A NODE PARA VOTAR (-1)\r\n\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=-1\")\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// UPVOTE\r\n\t\t\tif (this.voted === \"upvoted\") {\r\n\t\t\t\tif (vote === \"upvote\") {\r\n\t\t\t\t\tconsole.log(\"You removed the upvoted\")\r\n\t\t\t\t\tdocument.getElementById(\"Upvote\").style.filter = \"contrast(0%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes;\r\n\t\t\t\t\tthis.voted = \"\";\r\n\r\n\t\t\t\t\t// LLAMAR A NODE PARA VOTAR (-1)\r\n\t\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=-1\")\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"You upvoted but now downvote\")\r\n\t\t\t\t\tthis.voted = \"downvoted\"\r\n\t\t\t\t\tdocument.getElementById(\"Upvote\").style.filter = \"contrast(0%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Downvote\").style.filter = \"contrast(100%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes - 1;\r\n\r\n\t\t\t\t\t// LLAMAR A NODE PARA CAMBIAR EL VOTO (-2)\r\n\t\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=-2\")\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// DOWNVOTE\r\n\t\t\telse {\r\n\t\t\t\tif (vote === \"downvote\") {\r\n\t\t\t\t\tconsole.log(\"You removed the downvoted\")\r\n\t\t\t\t\tdocument.getElementById(\"Downvote\").style.filter = \"contrast(0%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes;\r\n\t\t\t\t\tthis.voted = \"\";\r\n\r\n\t\t\t\t\t// LLAMAR A NODE PARA VOTAR (+1)\r\n\t\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=1\")\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log(\"You downvoted but now upvoted\")\r\n\t\t\t\t\tthis.voted = \"upvoted\"\r\n\t\t\t\t\tdocument.getElementById(\"Upvote\").style.filter = \"contrast(100%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Downvote\").style.filter = \"contrast(0%)\";\r\n\t\t\t\t\tdocument.getElementById(\"Likes\").innerHTML = postLikes + 1;\r\n\r\n\t\t\t\t\t// LLAMAR A NODE PARA CAMBIAR EL VOTO (+2)\r\n\t\t\t\t\tfetch(this.url + \"/api/vote?postId=\" + postId + \"&vote=2\")\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuploadComment = () => {\r\n\t\tvar content\r\n\t\tvar date = \"\"\r\n\r\n\t\t/* GET DATE */\r\n\t\tvar today = new Date();\r\n\t\tvar yyyy = today.getFullYear();\r\n\t\tvar mm = String(today.getMonth() + 1).padStart(2, '0');\r\n\t\tvar dd = String(today.getDate()).padStart(2, '0');\r\n\t\tdate = yyyy + '-' + mm + '-' + dd;\r\n\r\n\t\t/* TEMPORARY UNTIL I GET LOG IN */\r\n\t\tvar author = \"unknown\";\r\n\r\n\t\t/* GET DATA */\r\n\t\tcontent = document.getElementById(\"CommentContent\").value;\r\n\r\n\t\t/* CHECK DATA */\r\n\t\tconsole.log(this.state.PostId)\r\n\t\tconsole.log(date)\r\n\t\tconsole.log(\"author \" + author)\r\n\t\tconsole.log(\"content \" + content)\r\n\r\n\t\t/* UPLOAD COMMENT */\r\n\t\tfetch(this.url + \"/api/uploadComment?postId=\" + this.state.PostId + \"&commentDate=\" + date + \"&commentAuthor=\" + author + \"&commentContent=\" + content)\r\n\r\n\t\t/* RELOAD TO SHOW COMMENT */\r\n\t\twindow.location.reload()\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"post\">\r\n\r\n\t\t\t\t{/* Divide in different kinds of post */}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.Post.map((post, i) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Card className=\"postCard\" key={i}>\r\n\t\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t\t<Card.Title>{post.postTitle}<p className=\"author\">{post.postAuthor}</p></Card.Title>\r\n\t\t\t\t\t\t\t\t\t<Card.Text>{post.postContent}</Card.Text>\r\n\t\t\t\t\t\t\t\t\t<div className=\"votes\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"arrow\" onClick={this.votePost.bind(this, post.postId, post.postLikes, \"upvote\")}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={Upvote}\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"Upvote\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"Upvote\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<p id=\"Likes\">{post.postLikes}</p>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"arrow\" onClick={this.votePost.bind(this, post.postId, post.postLikes, \"downvote\")}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={Downvote}\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"Downvote\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"Downvote\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t\t<Card.Img variant=\"top\" src={post.postImg} className=\"postCardImg\" />\r\n\t\t\t\t\t\t\t\t<Card.Footer><p className=\"footerTopic\">{post.postTopic}</p><p className=\"footerDate\">{post.postDate}</p></Card.Footer>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t\t<div className=\"comments\">\r\n\t\t\t\t\t<h2>Comments</h2>\r\n\t\t\t\t\t<div className=\"commentCreator\">\r\n\t\t\t\t\t\t<Card className=\"commentInputCard\">\r\n\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t<Card.Title ><h5>Write your comment</h5></Card.Title>\r\n\t\t\t\t\t\t\t\t<div className=\"commentInput\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"CommentContent\" className=\"commentContent\" placeholder=\"Comment\" maxLength=\"250\" />\r\n\t\t\t\t\t\t\t\t\t<input type=\"button\" className=\"commentUploadButton\" value=\"UPLOAD\" onClick={this.uploadComment} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.Comments.map((comment, i) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Card className=\"commentCard\" key={i}>\r\n\t\t\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t<Card.Title><p className=\"commentAuthor\">{comment.commentAuthor}</p><p className=\"commentDate\">{comment.commentDate}</p></Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t<Card.Text>{comment.commentContent}</Card.Text>\r\n\t\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Post\r\n\r\n"]},"metadata":{},"sourceType":"module"}